#!/usr/bin/env php
<?php
set_include_path(join(PATH_SEPARATOR, array(
    realpath(__DIR__ . '/../src'),
    realpath(__DIR__ . '/../examples/src'),
    get_include_path(),
)));

require_once 'Speciphy/Autoloader.php';
Speciphy\Autoloader::register();
require_once 'Speciphy/DSL.php';

require_once 'SpeciphyExamples/Stack.php';

use Speciphy\Loader\SpecFileLoader;
use Speciphy\ExampleGroupIterator;
use Speciphy\Reporter;

$reporter = new Reporter;

$files = new SpecFileLoader($argv[1]);
foreach ($files as $file) {
    $exampleGroup = include $file->getRealpath();
    $exampleGroup->run($reporter);
}

var_dump($reporter);
